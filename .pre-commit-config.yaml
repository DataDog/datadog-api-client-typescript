repos:
  - repo: local
    hooks:
      - id: generate
        name: Generate
        language: node
        entry: make
        files: '^(\.generator/.*|\.pre-commit-config\.yaml|package\.json|yarn\.lock|\.eslintrc\.js|Makefile)'
        pass_filenames: false
      - id: lint
        name: Lint
        language: node
        entry: yarn run lint:fix
        stages: [manual]
        pass_filenames: false
      - id: generator-v1
        name: generator-v1
        language: python
        entry: bash -c "cd .generator && poetry install && poetry run python -m generator -i ./schemas/v1/openapi.yaml -o ../packages"
        files: "^.generator/(config|schemas/v1|src|poetry.lock|pyproject.toml)"
        stages: [manual]
        pass_filenames: false
        additional_dependencies:
          - "poetry"
      - id: generator-v2
        name: generator-v2
        language: python
        entry: bash -c "cd .generator && poetry install && poetry run python -m generator -i ./schemas/v2/openapi.yaml -o ../packages"
        files: "^.generator/(config|schemas/v2|src|poetry.lock|pyproject.toml)"
        stages: [manual]
        pass_filenames: false
        additional_dependencies:
          - "poetry"

